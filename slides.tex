\documentclass[12pt]{beamer}
\usetheme[titleformat=allcaps]{metropolis}

% make title separator line invisible
\makeatletter
\setlength{\metropolis@titleseparator@linewidth}{0pt}
\makeatother

% make background color wihite so avatar
% background blend with background color
% \setbeamercolor{background canvas}{bg=white}
\usepackage{appendixnumberbeamer}
\usepackage{fancyvrb}
\usepackage{url}

% setup default font
% \usefonttheme{serif} % default family is serif
% \usepackage{fontspec}
% \setmainfont{Cochin}


% change bibliography fonts, so references occupy less space on slides
\setbeamerfont{bibliography entry author}{size=\tiny}
\setbeamerfont{bibliography entry title}{size=\tiny}
\setbeamerfont{bibliography entry location}{size=\tiny}
\setbeamerfont{bibliography entry note}{size=\tiny}
\setbeamerfont{bibliography item}{size=\tiny}


\title{Introduction To \\ Model Checking \\ with TLA+}
\date{\today}
\author{Nickolai Novik}
\institute{\href{http://github.com/jettify}{http://github.com/jettify}}
\titlegraphic{\hspace*{6cm} \includegraphics[height=8.5cm]{figures/avatar3.pdf}}

% =========================================================================== %
\begin{document}
  \maketitle
% --------------------------------------------------------------------------- %
  \begin{frame}{About Me}
    \begin{itemize}
        \item \textbf{[Software Engineer]}  DataRobot
        \item \textbf{[Github]}
            \href{http://github.com/jettify}{http://github.com/jettify}
        \item \textbf{[Twitter]}
            \href{https://twitter.com/isinf}{https://twitter.com/isinf}
        \item \textbf{[aio-libs]}
            \href{https://github.com/aio-libs}{https://github.com/aio-libs}
        \item \textbf{[Projects]}
            \textit{aiomonitor, aiohttp-debugtoolbar,
          aiobotocore, aiomysql, aioodbc, aiohttp-admin, aiorwlock,
          aiozipkin, etc}
    \end{itemize}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}[squeeze]{Agenda}
      \setbeamertemplate{section in toc}[sections numbered]
      \tableofcontents
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Poll}
      \begin{large}
          \textbf{How many of you heard of formal methods?}
      \end{large}
      \begin{itemize}
          \item I used one on of: Coq, Isable, TLA+, Alloy, Spin.
          \item I heard about it, but never used.
          \item I think formal methods are kinda cool.
      \end{itemize}
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{Problem Statement. Motivational Example}
% --------------------------------------------------------------------------- %
  \begin{frame}{Brave New World of (Microservises) Distributed Systems}
      \textbf{How to be confidant that critical software works correctly?}
      \begin{enumerate}
          \item Processor speed saturated, parallel execution is an answer
          \item Concurrent/Parallel program is often requirement
          \item Program complexity only raising
          \item Simplified (monolith) application out of fashion
          \item Due to micro services, everyone should be distributed
              systems expert
      \end{enumerate}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{QA approaches}
      \textbf{Most of industry uses following techniques for quality
      assurance:}
      \begin{enumerate}
          \item Design review
          \item Static code analysis
          \item Unit/Integration/Functional testing
          \item Code coverage
          \item Code review
          \item Stress testing
          \item Fault-injection testing
      \end{enumerate}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Distributed/Parallel algorithms extremely hard}
      \begin{alertblock}{Chord}
          is popular algorithm for P2P systems, paper published in
          2001 by strong team of MIT researchers, 10 years later bug found
          in specification \cite{stoica2001chord, Zave15}. Paper won best
          paper award.
      \end{alertblock}
      \begin{alertblock}{Snark}
          non-blocking deque algorithm, published by well known
          researchers from Sun, clearly written sketch proof of the correctness
          of the algorithm. Later significant issue was found in algorithm
          \cite{doherty2004dcas, lamport2006checking}.
      \end{alertblock}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Sometimes cost of error is very high}
      \begin{alertblock}{Mars Pathfinder}
          rover, the mission was jeopardised by a concurrent
          software bug in the lander. \cite{Pathfinder2013}
      \end{alertblock}
      \begin{alertblock}{Therac-25}
          radiation therapy machine, because of concurrent
          programming errors, it sometimes gave its patients radiation doses
          that were hundreds of times greater than normal \cite{wiki:therac}
      \end{alertblock}
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{Model Checking}
% --------------------------------------------------------------------------- %
  \begin{frame}{Slide Name}
      \textbf{Model checking} is a technique for automatically verifying
      correctness properties of finite-state systems.
      \begin{center}
          \includegraphics[scale=0.5]{figures/states-mc.png}
          \includegraphics[scale=0.6]{figures/states-testing.png}
      \end{center}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Temporal Logic of Actions}
      \begin{center}
          \includegraphics[scale=0.3]{figures/lamport.jpg}
      \end{center}
      \textbf{TLA+} language developed by \textbf{Leslie Lamport}. It is
      used to design, model, document, and verify concurrent systems, has
      been described as exhaustively-testable pseudocode and blueprints
      for software systems.
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{TLA+ industry usage}
      \begin{enumerate}
          \item AWS
          \item Microsoft
          \item Open Source Projects
          \item Intel/Digital/Compaq
      \end{enumerate}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{AWS}
    \begin{center}
       \includegraphics[scale=0.08]{figures/aws}
    \end{center}
     TLA+ helped to find design bugs in S3, Dynamo, EBS, EC2, etc, some
     requiring traces of 35 steps. \cite{aws2014}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Microsoft}
      MS used TLA+ to define consistency protocol for CosmosDB and memory
      allocator for XBox \cite{ms2017}
    \begin{center}
        \includegraphics[scale=0.2]{figures/cosmos}
    \end{center}
    \begin{center}
        \includegraphics[scale=0.2]{figures/xbox}
    \end{center}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Opens source}
      Number open source projects use TLA+ to verify complex algorithms:
      * Elastic -- data replication protocol
      * Mongodb -- data replication protocol
      * Hadoop/YARN -- registry of long lived processes
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{TLA+ Basics}
% --------------------------------------------------------------------------- %
  \begin{frame}{TLA+ hello worlds}
      \VerbatimInput[fontsize=\footnotesize]{figures/hourclock.tla}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Slide Name}
      % \includegraphics[bb = 10 50 612 800,clip=true,scale=1.0]{figures/hourclock.pdf}
      \begin{center}
        \includegraphics[scale=0.8]{figures/hourclock.pdf}
      \end{center}
  \end{frame}
% --------------------------------------------------------------------------- %
  \begin{frame}{Slide Name}
      xxx
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{TLA+ aiorwlock story}
% --------------------------------------------------------------------------- %
  \begin{frame}{Slide Name}
      text
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{TLA+ threads story}
% --------------------------------------------------------------------------- %
  \begin{frame}{Slide Name}
      text
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{TLA+ distributed algorithm}
% --------------------------------------------------------------------------- %
  \section{PlusCal extension}
% --------------------------------------------------------------------------- %
  \begin{frame}{aiorwlock possible states}
      \begin{center}
          \includegraphics[scale=0.35,angle=90]{figures/aiorwlock_model}
      \end{center}
  \end{frame}
% --------------------------------------------------------------------------- %
  \section{Conclusions}
% --------------------------------------------------------------------------- %
  \begin{frame}{Model Checking Issues}
    \begin{itemize}
      \item Used as an adjunct to, not a replacement for, standard quality
          assurance methods
      \item Formal methods are not a panacea, but can increase confidence in
          a productâ€™s reliability if applied with care and skill
      \item Very useful for consistency checks, but can not assure
          completeness
    \end{itemize}
  \end{frame}
% --------------------------------------------------------------------------- %
\begin{frame}
    \vspace{1cm}
    \begin{center}{\Huge Questions?} \end{center}
    \begin{center} \includegraphics[scale=0.7]{figures/qrcode}\end{center}
    \begin{center}
        \href{http://github.com/jettify}{http://github.com/jettify}
    \end{center}
\end{frame}
% --------------------------------------------------------------------------- %
\appendix
\begin{frame}[allowframebreaks]{References}
    \bibliography{references}
    \bibliographystyle{abbrv}
\end{frame}
% --------------------------------------------------------------------------- %
\end{document}
% =========================================================================== %
